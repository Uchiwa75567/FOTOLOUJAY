<div class="product-card" (click)="onCardClick()">
  <div class="product-image-wrapper">
    @if (product.photos && product.photos.length > 0) {
      <img [src]="getImageUrl(product.photos[0].url)" [alt]="product.title" class="product-image" />
    } @else {
      <img [src]="getImageUrl(product.photoUrl)" [alt]="product.title" class="product-image" />
    }
    <!-- Condition / quality badge displayed on top-left of the image -->
    @if (product.condition) {
      <div class="condition-badge" [ngClass]="getConditionClass(product.condition)">
        @if (product.condition === 'good') {
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 6L9 17l-5-5"></path>
          </svg>
        } @else if (product.condition === 'average') {
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="8"></circle>
            <line x1="8" y1="12" x2="16" y2="12"></line>
          </svg>
        } @else {
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        }
        <span>{{ getConditionLabel(product.condition) }}</span>
      </div>
    }
    <div class="product-overlay">
      <div class="product-views-badge">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
        <span>{{ product.views }}</span>
      </div>
      @if (product.price && product.price > 0) {
        <div class="product-price-badge">
          {{ product.price | currency:'EUR':'symbol':'1.0-0' }}
        </div>
      }
    </div>
  </div>

  <div class="product-content">
    <h3 class="product-title">{{ product.title }}</h3>
    <p class="product-description">{{ product.description }}</p>

    <div class="product-footer">
      @if (product.user) {
        <div class="product-author">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span>{{ product.user.username }}</span>
        </div>
      }
      <div class="product-date">
        {{ product.createdAt | date:'dd/MM/yyyy' }}
      </div>
    </div>
  </div>
</div>
